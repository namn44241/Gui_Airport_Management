<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lí sân bay</title>
    <link rel="stylesheet" href="">
    <style>
    /* Preloader styles */
    #preloader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, rgba(58,123,213,1) 0%, rgba(0,210,255,1) 100%);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        opacity: 1;
        transition: opacity 0.5s ease-in-out;
    }

    #preloader.hidden {
        opacity: 0;
        pointer-events: none;
    }

    .spinner {
        width: 150px;
        height: 150px;
        border: 4px solid #fff;
        border-top: 4px solid #ff6f61;
        border-radius: 50%;
        animation: spin 1s linear infinite, scale 3s ease-in-out infinite;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .avatar {
        width: 80%;
        height: 80%;
        border-radius: 50%;
        object-fit: cover;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
        animation: pulse 2s ease-in-out infinite;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    @keyframes scale {
        0%, 100% { transform: rotate(0deg) scale(1); }
        50% { transform: rotate(180deg) scale(1.1); }
    }

    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
    }

    /* Hide the main content initially */
    body > *:not(#preloader) {
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
    }

    body.loaded > *:not(#preloader) {
        opacity: 1;
    }
      /* Định dạng cho toàn bộ trang */
    body {
        font-family: 'Roboto', Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f0f8ff;
    }

    /* Định dạng cho header */
    header {
        background: linear-gradient(90deg, rgba(58,123,213,1) 0%, rgba(0,210,255,1) 100%);
        color: white;
        padding: 20px;
        text-align: center;
        border-radius: 0 0 20px 20px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        position: relative;
        overflow: hidden;
    }

    header h1 {
        font-size: 3em;
        animation: color-change 1s infinite;
        margin-bottom: 10px;
    }

    @keyframes color-change {
        0% { color: #ff0000; }
        25% { color: #00ff00; }
        50% { color: #0000ff; }
        75% { color: #ffff00; }
        100% { color: #ff00ff; }
    }

    header::before, header::after {
        content: '';
        position: absolute;
        top: -50px;
        width: 100px;
        height: 100px;
        border-radius: 50%;
        background: white;
        opacity: 0.1;
        pointer-events: none;
        animation: snow 10s linear infinite;
    }

    header::before { left: 10%; }
    header::after { right: 10%; animation-delay: 5s; }

    @keyframes snow {
        0% { transform: translateY(-100px) rotate(0deg); }
        100% { transform: translateY(100vh) rotate(360deg); }
    }

    /* Định dạng cho thanh điều hướng */
    nav {
        margin: 20px 0;
    }

    nav ul {
        list-style-type: none;
        margin: 0;
        padding: 0;
        background: linear-gradient(90deg, rgba(58,123,213,1) 0%, rgba(0,210,255,1) 100%);
        overflow: visible;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        display: flex;
        justify-content: center;
    }

    nav ul li {
        position: relative;
    }

    nav ul li a {
        display: block;
        padding: 15px 20px;
        text-decoration: none;
        color: white;
        transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s;
        text-align: center;
        font-weight: bold;
        white-space: nowrap;
    }

    nav > ul > li > a:after {
        content: ' ▼';
        font-size: 0.8em;
        display: none;
    }

    nav > ul > li:nth-child(2) > a:after,
    nav > ul > li:nth-child(3) > a:after {
        display: inline;
    }

    nav ul li > a:hover {
        background-color: #ff6f61;
        transform: scale(1.05);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        border-radius: 5px;
    }

    nav ul ul {
        display: none;
        position: absolute;
        top: 100%;
        left: 50%;
        transform: translateX(-50%);
        background: linear-gradient(90deg, rgba(58,123,213,1) 0%, rgba(0,210,255,1) 100%);
        border-radius: 0 0 10px 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        z-index: 1;
        min-width: 200px;
        flex-direction: column;
        opacity: 0;
        transition: opacity 0.3s, transform 0.3s;
    }

    nav ul li:hover > ul {
        display: block;
        opacity: 1;
        transform: translateX(-50%) translateY(5px);
    }

    nav ul ul li {
        width: 100%;
    }

    nav ul ul li a {
        padding: 12px 20px;
        color: white;
        text-decoration: none;
        display: block;
        text-align: left;
        font-weight: normal;
        transition: background-color 0.3s, padding-left 0.3s;
    }

    nav ul ul li a:hover {
        background-color: #ff6f61;
        transform: none;
        box-shadow: none;
        border-radius: 0;
        padding-left: 25px;
    }

    nav ul ul li:first-child a {
        border-radius: 5px 5px 0 0;
    }

    nav ul ul li:last-child a {
        border-radius: 0 0 5px 5px;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        nav ul {
            flex-direction: column;
            align-items: stretch;
        }

        nav ul li {
            width: 100%;
        }

        nav > ul > li > a:after {
            float: right;
            line-height: 1.5;
        }

        nav ul ul {
            position: static;
            transform: none;
            width: 100%;
            box-shadow: none;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 0;
        }

        nav ul li:hover > ul {
            display: block;
            transform: none;
        }

        nav ul ul li a {
            padding-left: 40px;
        }

        nav ul ul li a:hover {
            padding-left: 45px;
        }
    }
    /* Định dạng cho nội dung chính */
    main {
        padding: 20px;
        max-width: 1200px;
        margin: 0 auto;
        background-color: white;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    /* Định dạng cho form */
    form {
        background-color: #f4f4f4;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    form label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
    }

    form input[type="text"],
    form input[type="datetime-local"] {
        width: 100%;
        padding: 10px;
        margin-bottom: 15px;
        box-sizing: border-box;
        border: 1px solid #ccc;
        border-radius: 5px;
        font-size: 16px;
    }

    form button {
        padding: 12px 24px;
        background-color: #4CAF50;
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 5px;
        transition: background-color 0.3s, transform 0.3s;
        font-size: 16px;
        font-weight: bold;
    }

    form button:hover {
        background-color: #45a049;
        transform: translateY(-2px);
    }

    /* Định dạng cho bảng */
    table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        margin-top: 20px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        border-radius: 10px;
        overflow: hidden;
    }

    table th,
    table td {
        border: 1px solid #ddd;
        padding: 12px;
        text-align: left;
    }

    table th {
        background: linear-gradient(90deg, rgba(58,123,213,1) 0%, rgba(0,210,255,1) 100%);
        color: white;
        font-weight: bold;
        text-transform: uppercase;
    }

    table tr:nth-child(even) {
        background-color: #f8f8f8;
    }

    table tr:hover {
        background-color: #e8e8e8;
    }

    /* Định dạng cho các section */
    main section {
        display: none;
        padding: 20px;
        background-color: white;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        margin-top: 20px;
    }

    main section:target {
        display: block;
        animation: fadeIn 0.5s;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        nav ul {
            flex-direction: column;
            align-items: stretch;
        }

        nav ul li {
            width: 100%;
        }

        nav ul ul {
            position: static;
            display: none;
            width: 100%;
            box-shadow: none;
        }

        nav ul li:hover > ul {
            display: block;
        }
    }
  </style>
</head>
<body>
  <div id="preloader">
    <div class="spinner">
      <img src="wings.png" alt="Avatar" class="avatar">
    </div>
  </div>
  <header>
      <h1>Quản lí sân bay</h1>
  </header>
  <nav>
    <ul>
      <li><a href="#dashboard">Dashboard</a></li>
      <li>
        <a href="#create-data">Tạo dữ liệu </a>
        <ul>
          <li><a href="#customer-info">Khách hàng</a></li>
          <li><a href="#employee-info">Nhân viên</a></li>
          <li><a href="#airport-info">Sân bay</a></li>
          <li><a href="#aircraft-info">Máy bay</a></li>
          <li><a href="#flight-info">Chuyến bay</a></li>
          <li><a href="#schedule-info">Lịch bay</a></li>
        </ul>
      </li>
      <li>
        <a href="#exploit-data">Khai thác dữ liệu </a>
        <ul>
          <li><a href="#airline-info">Đặt chỗ</a></li>
          <li><a href="#assignment-info">Phân công</a></li>
        </ul>
      </li>
    </ul>
  </nav>
    <main>
        <section id="flight-info">
            <h2>Quản lý thông tin chuyến bay</h2>
          
            <!-- Form để thêm chuyến bay mới -->
            <form method="POST" action="{{ url_for('them_cb') }}">
              <label for="flight-id">Mã chuyến bay:</label>
              <input type="text" id="flight-id" name="flight-id" required><br>
              <label for="departure-airport">Sân bay đi:</label>
              <input type="text" id="departure-airport" name="departure-airport" placeholder="Nhập Sân bay đi"><br>
              <label for="arrival-airport">Sân bay đến:</label>
              <input type="text" id="arrival-airport" name="arrival-airport" placeholder="Nhập Sân bay đến"><br>
              <label for="departure-time">Giờ đi:</label>
              <input type="datetime-local" id="departure-time" name="departure-time" required><br>
              <label for="arrival-time">Giờ đến:</label>
              <input type="datetime-local" id="arrival-time" name="arrival-time" required><br>
              <button type="submit">Thêm chuyến bay mới</button>
            </form>
          
            <!-- Form để sửa chuyến bay -->
            <form method="POST" action="{{ url_for('sua_cb') }}">
              <label for="edit-flight-id">Mã chuyến bay:</label>
              <input type="text" id="edit-flight-id" name="flight-id" required><br>
              <label for="edit-departure-airport">Sân bay đi:</label>
              <input type="text" id="edit-departure-airport" name="departure-airport"><br>
              <label for="edit-arrival-airport">Sân bay đến:</label>
              <input type="text" id="edit-arrival-airport" name="arrival-airport"><br>
              <label for="edit-departure-time">Giờ đi:</label>
              <input type="datetime-local" id="edit-departure-time" name="departure-time" required><br>
              <label for="edit-arrival-time">Giờ đến:</label>
              <input type="datetime-local" id="edit-arrival-time" name="arrival-time" required><br>
              <button type="submit">Lưu thay đổi</button>
            </form>
          
            <!-- Bảng hiển thị thông tin chuyến bay -->
            <table>
              <thead>
                <tr>
                  <th>Mã chuyến bay</th>
                  <th>Sân bay đi</th>
                  <th>Sân bay đến</th>
                  <th>Giờ đi</th>
                  <th>Giờ đến</th>
                  <th>Thao tác</th>
                </tr>
              </thead>
              <tbody>
                {% for row in flight_info %}
                <tr>
                  <td>{{ row.MaChuyenBay }}</td>
                  <td>{{ row.TenSanBayDi }}</td>
                  <td>{{ row.TenSanBayDen }}</td>
                  <td>{{ row.GioDi.strftime('%Y-%m-%d %H:%M:%S') }}</td>
                  <td>{{ row.GioDen.strftime('%Y-%m-%d %H:%M:%S') }}</td>
                  <td>
                    <form method="POST" action="{{ url_for('xoa_cb', flight_id=row.MaChuyenBay) }}" onsubmit="return confirm('Bạn có chắc chắn muốn xóa chuyến bay này?');">
                      <button type="submit">Xóa</button>
                    </form>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </section>
        
          <section id="airport-info">
            <h2>Quản lý thông tin loại máy bay</h2>
            <!-- Form để thêm loại máy bay mới -->
            <form method="POST" action="{{ url_for('them_loai_mb') }}">
                <label for="plane-type-id">Mã loại:</label>
                <input type="text" id="plane-type-id" name="plane-type-id" required><br>
                <label for="manufacturer">Hãng sản xuất:</label>
                <input type="text" id="manufacturer" name="manufacturer" placeholder="Nhập tên hãng sản xuất" required><br>
                <button type="submit">Thêm thông tin Loại máy bay</button>
            </form>
        
            <!-- Form để sửa thông tin loại máy bay -->
            <form method="POST" action="{{ url_for('sua_loai_mb') }}">
                <label for="edit-plane-type-id">Mã loại:</label>
                <input type="text" id="edit-plane-type-id" name="plane-type-id" required><br>
                <label for="edit-manufacturer">Hãng sản xuất:</label>
                <input type="text" id="edit-manufacturer" name="manufacturer" placeholder="Nhập tên hãng sản xuất" required><br>
                <button type="submit">Lưu thay đổi</button>
            </form>
        
            <!-- Bảng hiển thị thông tin loại máy bay -->
            <table>
                <thead>
                    <tr>
                        <th>Mã loại</th>
                        <th>Hãng sản xuất</th>
                        <th>Thao tác</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in aircraft_info %}
                    <tr>
                        <td>{{ row['MaLoai'] }}</td>
                        <td>{{ row['HangSanXuat'] }}</td>
                        <td>
                            <form method="POST" action="{{ url_for('xoa_loai_mb', plane_type_id=row['MaLoai']) }}" onsubmit="return confirm('Bạn có chắc chắn muốn xóa loại máy bay này?');">
                                <button type="submit">Xóa</button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </section>        
        
          <script>
                var flightSelect = document.getElementById('flight-id');
                var departureDate = document.getElementById('departure-date');
                var customerSelect = document.getElementById('customer-id');
            
                flightSelect.addEventListener('change', function() {
                    var selectedFlightId = this.value;
                    var selectedCustomerId = customerSelect.value;
            
                    // Gửi yêu cầu AJAX để lấy ngày đi tương ứng với mã chuyến bay và mã khách hàng
                    fetch('/get_departure_date/' + selectedCustomerId + '/' + selectedFlightId)
                        .then(response => response.json())
                        .then(data => {
                            departureDate.value = data.departure_date;
                        })
                        .catch(error => {
                            console.error('Lỗi khi lấy ngày đi:', error);
                        });
                });
            </script>

          <section id="airline-info">
            <h2>Quản lý thông tin đặt chỗ</h2>
          
            <!-- Form để thêm thông tin đặt chỗ mới -->
            <form method="POST" action="{{ url_for('them_dat_cho') }}">
              <label for="customer-id">Mã khách hàng:</label>
              <input type="text" id="customer-id" name="customer-id" required>
              <br>

              <label for="flight-id">Mã chuyến bay:</label>
              <input type="text" id="flight-id" name="flight-id" required onchange="updateFlightDates(this.value)">
              <br>

              <label for="departure-date">Ngày đi:</label>
              <select id="departure-date" name="departure-date" required></select>
              <br>

              <button type="submit">Thêm thông tin đặt chỗ</button>
            </form>

            <!-- Form để sửa thông tin đặt chỗ -->
            <h3>hi</h3>
            <form method="POST" action="{{ url_for('sua_dat_cho') }}">
              <label for="customer-id">Mã khách hàng:</label>
              <input type="text" id="customer-id" name="customer-id" required>
              <br>
              <label for="flight-id">Mã chuyến bay:</label>
              <input type="text" id="flight-id" name="flight-id" required onchange="updateFlightDates(this.value)">
              <br>
              <label for="departure-date">Ngày đi:</label>
              <select id="departure-date" name="departure-date" required></select>
              <br>
              <button type="submit">Lưu thay đổi</button>
          </form>

            <script>
              function updateFlightDates(flightId) {
                const departureDate = document.getElementById('departure-date');
                departureDate.innerHTML = '';

                if (flightId) {
                    fetch(`/get_flight_dates?flight_id=${flightId}`)
                        .then(response => response.json())
                        .then(data => {
                            const flightDates = data.flight_dates;
                            const defaultOption = document.createElement('option');
                            defaultOption.value = '';
                            defaultOption.text = '-- Chọn ngày đi --';
                            departureDate.add(defaultOption);
                            flightDates.forEach(date => {
                                const option = document.createElement('option');
                                const formattedDate = new Date(date).toLocaleDateString('vi-VN', { day: '2-digit', month: '2-digit', year: 'numeric' });
                                option.value = date;
                                option.text = formattedDate;
                                departureDate.add(option);
                            });
                        })
                        .catch(error => console.error(error));
                } else {
                    const defaultOption = document.createElement('option');
                    defaultOption.value = '';
                    defaultOption.text = '-- Chọn ngày đi --';
                    departureDate.add(defaultOption);
                }
            }
          </script>
          
            <!-- Bảng hiển thị thông tin đặt chỗ -->
            <table>
              <thead>
                <tr>
                  <th>Mã khách hàng</th>
                  <th>Ngày đi</th>
                  <th>Mã chuyến bay</th>
                  <th>Thao tác</th>
                </tr>
              </thead>
              <tbody>
                {% for row in booking_info %}
                <tr>
                  <td>{{ row.MaKH }}</td>
                  <td>{{ row.NgayDi }}</td>
                  <td>{{ row.MaChuyenBay }}</td>
                  <td>
                    <form method="POST" action="{{ url_for('xoa_dat_cho', customer_id=row.MaKH, departure_date=row.NgayDi, flight_id=row.MaChuyenBay) }}" onsubmit="return confirm('Bạn có chắc chắn muốn xóa đặt chỗ này?');">
                      <button type="submit">Xóa</button>
                    </form>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </section>
        
        
          <section id="aircraft-info">
            <h2>Quản lý thông tin máy bay</h2>
            <form method="POST" action="{{ url_for('them_mb') }}">
                <label for="plane-id">Số hiệu:</label>
                <input type="text" id="plane-id" name="plane-id" required><br>
                <label for="plane-type-id">Mã loại:</label>
                <input type="text" id="plane-type-id" name="plane-type-id" required><br>
                <label for="seat-quantity">Số lượng ghế:</label>
                <input type="text" id="seat-quantity" name="seat-quantity" required><br>
                <button type="submit">Thêm máy bay mới</button>
            </form>
        
            <!-- Form để sửa thông tin máy bay -->
            <form method="POST" action="{{ url_for('sua_mb') }}">
                <label for="edit-plane-id">Số hiệu:</label>
                <input type="text" id="edit-plane-id" name="plane-id" required><br>
                <label for="edit-plane-type-id">Mã loại:</label>
                <input type="text" id="edit-plane-type-id" name="plane-type-id" required><br>
                <label for="edit-seat-quantity">Số lượng ghế:</label>
                <input type="text" id="edit-seat-quantity" name="seat-quantity" required><br>
                <button type="submit">Lưu thay đổi</button>
            </form>
        
            <!-- Bảng hiển thị thông tin máy bay -->
            <table>
              <thead>
                <tr>
                  <th>Số hiệu</th>
                  <th>Loại máy bay</th>
                  <th>Số lượng ghế</th>
                </tr>
              </thead>
              <tbody>
                {% for plane in plane_info %}
                <tr>
                  <td>{{ plane.SoHieu }}</td>
                  <td>{{ plane.MaLoai }}</td>
                  <td>{{ plane.SoGheNgoi }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>            
        </section>                
             
        
          <section id="customer-info">
            <h2>Quản lý thông tin khách hàng</h2>
            <form method="POST" action="{{ url_for('them_kh') }}">
              <label for="customer-id">Mã khách hàng:</label>
              <input type="text" id="customer-id" name="customer-id" required><br>
              <label for="customer-phone">Số điện thoại:</label>
              <input type="text" id="customer-phone" name="customer-phone" placeholder="Nhập số điện thoại"><br>
              <label for="customer-last-name">Họ đệm:</label>
              <input type="text" id="customer-last-name" name="customer-last-name" placeholder="Nhập họ đệm"><br>
              <label for="customer-first-name">Tên:</label>
              <input type="text" id="customer-first-name" name="customer-first-name" placeholder="Nhập tên"><br>
              <label for="customer-address">Địa chỉ:</label>
              <input type="text" id="customer-address" name="customer-address" placeholder="Nhập địa chỉ"><br>
              <button type="submit">Thêm thông tin khách hàng</button>
            </form>
            <form method="POST" action="{{ url_for('sua_kh') }}">
                <label for="edit-customer-id">Mã khách hàng:</label>
                <input type="text" id="edit-customer-id" name="customer-id" required><br>
                <label for="edit-customer-phone">Số điện thoại:</label>
                <input type="text" id="edit-customer-phone" name="customer-phone" placeholder="Nhập số điện thoại"><br>
                <label for="edit-customer-last-name">Họ đệm:</label>
                <input type="text" id="edit-customer-last-name" name="customer-last-name" placeholder="Nhập họ đệm"><br>
                <label for="edit-customer-first-name">Tên:</label>
                <input type="text" id="edit-customer-first-name" name="customer-first-name" placeholder="Nhập tên"><br>
                <label for="edit-customer-address">Địa chỉ:</label>
                <input type="text" id="edit-customer-address" name="customer-address" placeholder="Nhập địa chỉ"><br>
                <button type="submit">Lưu thay đổi</button>
              </form>
            <table>
              <thead>
                <tr>
                  <th>Mã khách hàng</th>
                  <th>Số điện thoại</th>
                  <th>Họ đệm</th>
                  <th>Tên</th>
                  <th>Địa chỉ</th>
                  <th>Thao tác</th>
                </tr>
              </thead>
              <tbody>
                {% for row in customer_info %}
                <tr>
                  <td>{{ row.MaKH }}</td>
                  <td>{{ row.SDT }}</td>
                  <td>{{ row.HoDem }}</td>
                  <td>{{ row.Ten }}</td>
                  <td>{{ row.DiaChi }}</td>
                  <td>
                    <form method="POST" action="{{ url_for('xoa_kh', customer_id=row.MaKH) }}" onsubmit="return confirm('Bạn có chắc chắn muốn xóa khách hàng này?');">
                      <button type="submit">Xóa</button>
                    </form>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </section>        
        
          <section id="employee-info">
            <h2>Quản lý thông tin nhân viên</h2>
            <form method="POST" action="{{ url_for('them_nv') }}">
              <label for="employee-id">Mã nhân viên:</label>
              <input type="text" id="employee-id" name="employee-id" required><br>
              <label for="employee-last-name">Họ đệm:</label>
              <input type="text" id="employee-last-name" name="employee-last-name" placeholder="Nhập họ đệm"><br>
              <label for="employee-first-name">Tên:</label>
              <input type="text" id="employee-first-name" name="employee-first-name" placeholder="Nhập tên"><br>
              <label for="employee-phone">Số điện thoại:</label>
              <input type="text" id="employee-phone" name="employee-phone" placeholder="Nhập số điện thoại"><br>
              <label for="employee-address">Địa chỉ:</label>
              <input type="text" id="employee-address" name="employee-address" placeholder="Nhập địa chỉ"><br>
              <label for="employee-salary">Lương:</label>
              <input type="text" id="employee-salary" name="employee-salary" placeholder="Nhập lương"><br>
              <label for="employee-type">Loại nhân viên:</label>
              <input type="text" id="employee-type" name="employee-type" placeholder="Nhập loại nhân viên"><br>
              <button type="submit">Thêm thông tin nhân viên</button>
            </form>

            <table>
              <thead>
                <tr>
                  <th>Mã nhân viên</th>
                  <th>Họ đệm</th>
                  <th>Tên</th>
                  <th>Số điện thoại</th>
                  <th>Địa chỉ</th>
                  <th>Lương</th>
                  <th>Loại nhân viên</th>
                  <th>Thao tác</th>
                </tr>
              </thead>
              <tbody>
                {% for row in employee_info %}
                <tr>
                  <td>{{ row.MaNV }}</td>
                  <td>{{ row.HoDem }}</td>
                  <td>{{ row.Ten }}</td>
                  <td>{{ row.SDT }}</td>
                  <td>{{ row.DiaChi }}</td>
                  <td>{{ row.Luong }}</td>
                  <td>{{ row.LoaiNV }}</td>
                  <td>
                    <form method="POST" action="{{ url_for('xoa_nv', employee_id=row.MaNV) }}" onsubmit="return confirm('Bạn có chắc chắn muốn xóa nhân viên này?');">
                      <button type="submit">Xóa</button>
                    </form>
                    <form method="POST" action="{{ url_for('sua_nv', employee_id=row.MaNV) }}">
                        <input type="hidden" name="employee-id" value="{{ row.MaNV }}">
                        <label for="edit-employee-last-name">Họ đệm:</label>
                        <input type="text" id="edit-employee-last-name" name="employee-last-name" value="{{ row.HoDem }}" required><br>
                        <label for="edit-employee-first-name">Tên:</label>
                        <input type="text" id="edit-employee-first-name" name="employee-first-name" value="{{ row.Ten }}" required><br>
                        <label for="edit-employee-phone">Số điện thoại:</label>
                        <input type="text" id="edit-employee-phone" name="employee-phone" value="{{ row.SDT }}" required><br>
                        <label for="edit-employee-address">Địa chỉ:</label>
                        <input type="text" id="edit-employee-address" name="employee-address" value="{{ row.DiaChi }}" required><br>
                        <label for="edit-employee-salary">Lương:</label>
                        <input type="text" id="edit-employee-salary" name="employee-salary" value="{{ row.Luong }}" required><br>
                        <label for="edit-employee-type">Loại nhân viên:</label>
                        <input type="text" id="edit-employee-type" name="employee-type" value="{{ row.LoaiNV }}" required><br>
                        <button type="submit">Lưu thay đổi</button>
                    </form>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </section>        
        
          <section id="schedule-info">
            <!-- Form for managing flight schedule information -->
            <h2>Quản lý lịch bay</h2>
            <form method="POST" action="{{ url_for('them_lich') }}">
                <label for="flight-id">Mã chuyến bay:</label>
                <input type="text" id="flight-id" name="flight-id" placeholder="" required><br>
                <label for="aircraft-id">Số hiệu máy bay:</label>
                <input type="text" id="aircraft-id" name="aircraft-id" placeholder="" required><br>
                <label for="aircraft-type-id">Mã loại máy bay:</label>
                <input type="text" id="aircraft-type-id" name="aircraft-type-id" placeholder="" required><br>
                <label for="departure-date">Ngày đi:</label>
                <input type="date" id="departure-date" name="departure-date" placeholder="Nhập ngày đi" required><br>
                <button type="submit">Thêm lịch bay mới</button>
            </form>
        
            <!-- Table for displaying flight schedule information -->
            <table>
                <thead>
                    <tr>
                        <th>Ngày đi</th>
                        <th>Mã chuyến bay</th>
                        <th>Số hiệu máy bay</th>
                        <th>Mã loại máy bay</th>
                        <th>Thao tác</th>
                    </tr>
                </thead>
                <tbody>
                    {% for schedule_row in schedule_info %}
                    <tr>
                        <td>{{ schedule_row.NgayDi }}</td>
                        <td>{{ schedule_row.MaChuyenBay }}</td>
                        <td>{{ schedule_row.SoHieu }}</td>
                        <td>{{ schedule_row.MaLoai }}</td>
                        <td>
                            <!-- Form để sửa thông tin lịch bay -->
                            <form method="POST" action="{{ url_for('sua_lich') }}">
                                <input type="hidden" name="schedule-id" value="{{ schedule_row.MaChuyenBay }}">
                                <label for="edit-flight-id">Mã chuyến bay:</label>
                                <input type="text" id="edit-flight-id" name="flight-id" value="{{ schedule_row.SoHieu }}" required><br>
                                <label for="edit-aircraft-id">Số hiệu máy bay:</label>
                                <input type="text" id="edit-aircraft-id" name="aircraft-id" value="{{ schedule_row.MaLoai }}" required><br>
                                <label for="edit-aircraft-type-id">Mã loại máy bay:</label>
                                <input type="text" id="edit-aircraft-type-id" name="aircraft-type-id" value="{{ schedule_row.NgayDi }}" required><br>
                                <label for="edit-departure-date">Ngày đi:</label>
                                <input type="date" id="edit-departure-date" name="departure-date" value="{{ schedule_row.NgayDi }}" required><br>
                                <button type="submit">Lưu thay đổi</button>
                            </form>
        
                            <!-- Form để xóa lịch bay -->
                            <form method="POST" action="{{ url_for('xoa_lich') }}">
                              <input type="hidden" name="flight-id" value="{{ schedule_row.MaChuyenBay }}"> <!-- Add this line -->
                              <input type="hidden" name="schedule-id" value="{{ schedule_row.MaLichBay }}">
                              <button type="submit" onclick="return confirm('Bạn có chắc chắn muốn xóa lịch bay này?');">Xóa</button>
                          </form>
                                               

                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </section>        
        
        <section id="assignment-info">
          <h2>Quản lý phân công</h2>
          <form method="POST" action="{{ url_for('them_phan_cong') }}">
              <label for="customer-id">Mã khách hàng:</label>
              <select id="customer-id" name="customer-id" required>
                  {% for customer in customer_info %}
                      <option value="{{ customer.MaKH }}">{{ customer.MaKH }} - {{ customer.HoDem }} {{ customer.Ten }}</option>
                  {% endfor %}
              </select><br>
              <label for="new-departure-date">Ngày đi:</label>
              <input type="date" id="departure-date" name="departure-date" value="{{ assignment_info.NgayDi }}" required><br>
              <label for="schedule-id">Mã lịch bay:</label>
              <select id="schedule-id" name="schedule-id" required>
                  {% for flight in flight_info %}
                      <option value="{{ flight.MaChuyenBay }}">{{ flight.MaChuyenBay }} - {{ flight.TenSanBayDi }} - {{ flight.TenSanBayDen }}</option>
                  {% endfor %}
              </select><br>
   
              <button type="submit">Thêm phân công mới</button>
          </form>

          <form method="POST" action="{{ url_for('sua_phan_cong', customer_id=assignment_info.MaKH, departure_date=assignment_info.NgayDi, flight_id=assignment_info.MaChuyenBay) }}">
            <label for="new-customer-id">Mã khách hàng:</label>
            <select id="new-customer-id" name="new-customer-id" required>
                {% for customer in customer_info %}
                    <option value="{{ customer.MaKH }}" {% if customer.MaKH == assignment_info.MaKH %}selected{% endif %}>{{ customer.MaKH }} - {{ customer.HoDem }} {{ customer.Ten }}</option>
                {% endfor %}
            </select><br>

            <label for="new-departure-date">Ngày đi:</label>
            <input type="date" id="new-departure-date" name="new-departure-date" value="{{ assignment_info.NgayDi }}" required><br>

            <label for="new-flight-id">Mã chuyến bay:</label>
            <select id="new-flight-id" name="new-flight-id" required>
                {% for flight in flight_info %}
                    <option value="{{ flight.MaChuyenBay }}" {% if flight.MaChuyenBay == assignment_info.MaChuyenBay %}selected{% endif %}>{{ flight.MaChuyenBay }} - {{ flight.TenSanBayDi }} - {{ flight.TenSanBayDen }}</option>
                {% endfor %}
            </select><br>

            <button type="submit">Lưu thay đổi</button>
        </form>
   
          <!-- Bảng hiển thị thông tin phân công -->
          <table>
              <thead>
                  <tr>
                      <th>Mã khách hàng</th>
                      <th>Ngày đi</th>
                      <th>Mã chuyến bay</th>
                      <th>Thao tác</th>
                  </tr>
              </thead>
              <tbody>
                  {% for row in booking_info %}
                  <tr>
                      <td>{{ row.MaKH }}</td>
                      <td>{{ row.NgayDi }}</td>
                      <td>{{ row.MaChuyenBay }}</td>
                      <td>
                          <form method="POST" action="{{ url_for('xoa_phan_cong', customer_id=row.MaKH, departure_date=row.NgayDi, flight_id=row.MaChuyenBay) }}">
                              <input type="hidden" name="customer-id" value="{{ row.MaKH }}">
                              <input type="hidden" name="departure-date" value="{{ row.NgayDi }}">
                              <input type="hidden" name="flight-id" value="{{ row.MaChuyenBay }}">
                              <button type="submit" onclick="return confirm('Bạn có chắc chắn muốn xóa phân công này?');">Xóa</button>
                          </form>
                      </td>
                  </tr>
                  {% endfor %}
              </tbody>
          </table>
      </section>        

    </main>
    <footer>
        <p>&copy; 2024 Quản lí sân bay. All rights reserved.</p>
    </footer>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        setTimeout(function() {
          document.getElementById('preloader').classList.add('hidden');
          document.body.classList.add('loaded');
        }, 5000); 
      });
    
      window.addEventListener('load', function() {
        setTimeout(function() {
          if (!document.body.classList.contains('loaded')) {
            document.getElementById('preloader').classList.add('hidden');
            document.body.classList.add('loaded');
          }
        }, 500);
      });
    </script>
</body>
</html>